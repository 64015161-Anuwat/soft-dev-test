{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tode_\\\\Desktop\\\\\\u0E1B2\\u0E172\\\\test_space\\\\sofware_f\\\\src\\\\Components\\\\Confirm.js\",\n  _s = $RefreshSig$();\nimport io from 'socket.io-client';\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { variables } from \"../Variables\";\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5001');\nconst socket0 = io('http://localhost:5001');\nfunction AppConfirm() {\n  _s();\n  const {\n    id,\n    start\n  } = useParams();\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState('');\n  const [time, setTime] = useState('');\n  const [order, setOrder] = useState(null);\n  const MySwal = withReactContent(Swal);\n  useEffect(() => {\n    console.log(id);\n    console.log(start);\n    socket.emit('join', id);\n    if (start === '1') {\n      socket0.emit('join', id);\n      socket0.emit('start', id);\n    }\n\n    // Listen for event from the server\n    socket.on('time', message => {\n      setTime(message);\n    });\n    socket.on('cancel', message => {\n      setMessages(message);\n      // MySwal.fire({\n      //     html: \n      //         '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\n      //         message+\n      //         '</p>',\n      //     icon: \"error\",\n      //     confirmButtonColor: \"#F07221\"\n      // });\n    });\n\n    socket.on('confirm', message => {\n      setMessages(message);\n    });\n    socket.on('msg', message => {\n      setMessages(message);\n    });\n    socket0.on('cancel', message => {\n      console.log(0);\n      socket0.emit('cancel', id);\n    });\n    socket0.on('confirm', message => {\n      console.log(0);\n      socket0.emit('confirm', id);\n    });\n    socket0.on('cancel', message => {\n      console.log(0);\n      socket0.emit('cancel', id);\n      MySwal.fire({\n        html: '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">' + message + '</p>',\n        icon: \"error\",\n        confirmButtonColor: \"#F07221\"\n      });\n    });\n    socket0.on('confirm', message => {\n      console.log(0);\n      socket0.emit('confirm', id);\n      MySwal.fire({\n        html: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 23\n        }, this),\n        icon: \"success\",\n        confirmButtonColor: \"#F07221\"\n      });\n    });\n    fetch(variables.API_URL + \"get_order/\" + id, {\n      method: \"GET\",\n      headers: {\n        'Accept': 'application/json, text/plain',\n        'Content-Type': 'application/json;charset=UTF-8'\n      }\n    }).then(response => response.json()).then(result => {\n      console.log(result);\n      if (result.length > 0) {\n        setOrder(result[0]);\n      }\n    });\n  }, []);\n  async function sendConfirm() {\n    // Emit event to the server\n    if (start === '1') {\n      socket0.emit('confirm', id);\n    } else socket.emit('confirm_', id);\n    // window.location.replace(window.location.origin)\n  }\n\n  async function sendCancel() {\n    // Emit event to the server\n    if (start === '1') {\n      socket0.emit('cancel', id);\n    } else socket.emit('cancel_', id);\n    // window.location.replace(window.location.origin)\n  }\n\n  if (order !== null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), order.create_by.toString() === localStorage.getItem('id').toString() ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          sendConfirm(e);\n        },\n        children: \"confirm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 87\n      }, this) : '', /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          sendCancel(e);\n        },\n        children: \"cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this);\n  }\n}\n_s(AppConfirm, \"uF8pGEvjWl/wBWzmUAtzNqgokoo=\", false, function () {\n  return [useParams];\n});\n_c = AppConfirm;\nexport default AppConfirm;\nvar _c;\n$RefreshReg$(_c, \"AppConfirm\");","map":{"version":3,"names":["io","Link","useParams","useNavigate","useState","useEffect","variables","Swal","withReactContent","jsxDEV","_jsxDEV","socket","socket0","AppConfirm","_s","id","start","input","setInput","messages","setMessages","time","setTime","order","setOrder","MySwal","console","log","emit","on","message","fire","html","icon","confirmButtonColor","children","fileName","_jsxFileName","lineNumber","columnNumber","fetch","API_URL","method","headers","then","response","json","result","length","sendConfirm","sendCancel","create_by","toString","localStorage","getItem","onClick","e","_c","$RefreshReg$"],"sources":["C:/Users/tode_/Desktop/ป2ท2/test_space/sofware_f/src/Components/Confirm.js"],"sourcesContent":["import io from 'socket.io-client';\r\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {variables} from \"../Variables\";\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\n\r\nconst socket = io('http://localhost:5001');\r\nconst socket0 = io('http://localhost:5001');\r\n\r\nfunction AppConfirm(){\r\n    const {id, start} = useParams();\r\n    const [input, setInput] = useState('');\r\n    const [messages, setMessages] = useState('');\r\n    const [time, setTime] = useState('');\r\n    const [order, setOrder] = useState(null);\r\n    const MySwal = withReactContent(Swal);\r\n\r\n    useEffect(()=>{\r\n        console.log(id)\r\n        console.log(start)\r\n        socket.emit('join', id);\r\n\r\n        if(start === '1'){\r\n            socket0.emit('join', id);\r\n            socket0.emit('start', id);\r\n        }\r\n\r\n        // Listen for event from the server\r\n        socket.on('time', (message) => {\r\n            setTime(message)\r\n        });\r\n\r\n        socket.on('cancel', (message) => {\r\n            setMessages(message)\r\n            // MySwal.fire({\r\n            //     html: \r\n            //         '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\r\n            //         message+\r\n            //         '</p>',\r\n            //     icon: \"error\",\r\n            //     confirmButtonColor: \"#F07221\"\r\n            // });\r\n        });\r\n\r\n        socket.on('confirm', (message) => {\r\n            setMessages(message)\r\n            \r\n        });\r\n\r\n        socket.on('msg', (message) => {\r\n            setMessages(message)\r\n        });\r\n\r\n        socket0.on('cancel', (message) => {\r\n            console.log(0)\r\n            socket0.emit('cancel', id);\r\n        });\r\n\r\n        socket0.on('confirm', (message) => {\r\n            console.log(0)\r\n            socket0.emit('confirm', id);\r\n        });\r\n\r\n        socket0.on('cancel', (message) => {\r\n            console.log(0)\r\n            socket0.emit('cancel', id);\r\n            MySwal.fire({\r\n                html: \r\n                    '<p style=\"text-align: left; margin: 0 auto;max-width: fit-content;\">'+\r\n                    message+\r\n                    '</p>',\r\n                icon: \"error\",\r\n                confirmButtonColor: \"#F07221\"\r\n            });\r\n        });\r\n\r\n        socket0.on('confirm', (message) => {\r\n            console.log(0)\r\n            socket0.emit('confirm', id);\r\n            MySwal.fire({\r\n                html: <p>{message}</p>,\r\n                icon: \"success\",\r\n                confirmButtonColor: \"#F07221\"\r\n            })\r\n        });\r\n\r\n        fetch(variables.API_URL+\"get_order/\"+id, {\r\n            method: \"GET\",\r\n            headers: {\r\n                'Accept': 'application/json, text/plain',\r\n                'Content-Type': 'application/json;charset=UTF-8'\r\n            },\r\n            })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                console.log(result)\r\n                if(result.length > 0){\r\n                    setOrder(result[0])\r\n                }\r\n            }\r\n        )\r\n    }, [])\r\n\r\n    async function sendConfirm() {\r\n        // Emit event to the server\r\n        if(start === '1'){\r\n        socket0.emit('confirm', id);\r\n        } else\r\n        socket.emit('confirm_', id);\r\n        // window.location.replace(window.location.origin)\r\n    }\r\n\r\n    async function sendCancel() {\r\n        // Emit event to the server\r\n        if(start === '1'){\r\n        socket0.emit('cancel', id);\r\n        } else\r\n        socket.emit('cancel_', id);\r\n        // window.location.replace(window.location.origin)\r\n    }\r\n\r\n    if(order !== null){\r\n        return (\r\n            <div>\r\n                <ul>\r\n                {time}\r\n                </ul>\r\n                {order.create_by.toString() === localStorage.getItem('id').toString()?<button onClick={(e)=>{sendConfirm(e)}}>confirm</button>:''}\r\n                <button onClick={(e)=>{sendCancel(e)}}>cancel</button>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nexport default AppConfirm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}